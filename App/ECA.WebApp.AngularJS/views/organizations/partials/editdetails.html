<div in-context-form ng-controller="OrganizationEditDetailsCtrl">
    <form name="form.organizationForm" class="form-horizontal">
        <div class="form-group">
            <label class="col-md-2 title-label" for="projectName">Name <span class="asterisk"> *</span></label>
            <div class="col-md-10">
                <input name="name"
                       ng-model="organization.name"
                       form-element guidance="This is the name of the organization."
                       type="text"
                       maxlength="600"
                       class="form-control"
                       placeholder="Enter organization name..."
                       id="name"
                       required />
                <div ng-show="form.organizationForm.name.$dirty">
                    <div class="error" ng-show="form.organizationForm.name.$error.required">Please enter an organization name.</div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 title-label" for="description">Description <span class="asterisk"> *</span></label>
            <div class="col-md-10">
                <textarea name="description"
                          ng-model="organization.description"
                          form-element guidance="This is the description of the organization."
                          type="text"
                          maxlength="3000"
                          id="description"
                          class="form-control"
                          placeholder="Enter organization description..."
                          required />
                <div ng-show="form.organizationForm.description.$dirty">
                    <div class="error" ng-show="form.organizationForm.description.$error.required">Please enter an organization description.</div>
                </div>
            </div>
        </div>
        <div class="row tags">
            <span ng-repeat="tag in organization.tags" class="tag">#{{tag}}</span>
        </div>

        <div class="col-md-6">
            <div class="form-group">
                <label class="col-md-4 title-label">Website</label>
                <div class="col-md-8">
                    <input type="text" 
                           maxlength="2000"
                           class="form-control" 
                           ng-model="organization.website"/>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-4 title-label">Type</label>
                <div class="col-md-8">
                    <select class="form-control" 
                            ng-model="organization.organizationTypeId" 
                            ng-options="organizationType.id as organizationType.name for organizationType in view.organizationTypes" />
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label class="col-md-4 title-label">Parent Organization</label>
                <div class="col-md-8">
                    <input type="search"
                           class="search-contextual"
                           maxlength="100"
                           typeahead-append-to-body="false"
                           placeholder="Select parent organization..."
                           ng-model="organization.parentOrganizationName"
                           typeahead-wait-ms="400"
                           ng-blur="view.onSelectParentOrganizationBlur($event)"
                           typeahead-loading="view.isLoadingParentOrganizations"
                           typeahead="org as org.name for org in view.getAvailableParentOrganizations($viewValue) | filter : $viewValue | limitTo : view.searchAvailableOrganizationsLimit"
                           typeahead-on-select="view.onSelectAvailableParentOrganization($item, $model, $label)"
                           typeahead-template-url="selectParentOrganizationTemplate.html"
                           typeahead-editable="false">
                    </input>
                    <i class="glyphicon glyphicon-search contextual" ng-show="!view.isLoadingParentOrganizations"></i>
                    <i class="material-icons md-18 material-icons-spin contextual-busy" ng-show="view.isLoadingParentOrganizations">refresh</i>
                </div>
            </div>
        </div>
    </form>
</div>

<script type="text/ng-template" id="selectParentOrganizationTemplate.html">
    <a>
        <!--Organization search results-->
        <div ng-show="match.model.name">
            <span bind-html-unsafe="match.model.name | typeaheadHighlight:query"></span>
        </div>     
    </a>
</script>
