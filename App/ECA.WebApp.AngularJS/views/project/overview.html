<div collapse="view.areAlertsCollapsed">
    <alert ng-repeat="notification in view.notifications" type="{{notification.type}}">{{notification.msg}}</alert>
</div>

<div>
    <div class="pull-right" ng-show="editView.show">
        <button ng-click="view.onSaveClick($event)" class="btn btn-success">Save</button>
        <button ng-click="view.onCancelClick($event)" class="btn">Cancel</button>
    </div>
    <h2 class="project-color tab-header" ng-show="!view.isLoading && !view.isSaving">Overview</h2>
</div>

<div class="spinner" ng-show="view.isLoading || view.isSaving">
    <div class="bounce1"></div>
    <div class="bounce2"></div>
    <div class="bounce3"></div>
</div>

<div ng-show="!view.isLoading && !view.isSaving">
    <!--<div class="row">
        <span class="right icon span" ng-click="editDescription.$show()" ng-hide="editDescription.$visible"></span>
    </div>-->
    <div class="row" ng-show="editView.show">
        <h5 class="col-md-6">Project Name</h5>

        <h5 class="col-md-6" ng-show="editView.show"><a href="#" editable-text="project.name">{{ project.name || 'NO PROJECT NAME' }}</a></h5>
    </div>
    <div class="row">
        <h5 ng-show="!editView.show">{{project.description}}</h5>

        <h5 class="col-md-6" ng-show="editView.show">Description</h5>
        <h5 class="col-md-6" ng-show="editView.show" editable-textarea="project.description" e-rows="5" e-cols="150">{{project.description}}</h5>
        <!--<img class="right icon" ng-click="editDescription.$show()" ng-hide="editDescription.$visible" src="images/editA.png" alt="">-->
    </div>
    <div class="row tags">
        <span ng-repeat="tag in project.tags" class="tag">#{{tag}}</span>
    </div>
    <div class="row table">
        <h4 class="tab-subheader">Details</h4>
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-6 title-label">Status</div>
                <div class="col-md-6" ng-show="!editView.show">{{project.status}}</div>
                <a href="#" ng-show="editView.show" editable-select="project.projectStatusId" onshow="editView.loadProjectStati()" onaftersave="view.updateStatusView()" e-ng-options="s.id as s.name for s in editView.projectStati">
                    {{ project.status }}
                </a>
            </div>
            <div class="row">
                <div class="col-md-6 title-label">Start Date</div>
                <div class="col-md-6" ng-show="!editView.show">{{(project.startDate | date:"MMMM dd, yyyy") || 'No start date.'}}</div>
                <a href="#" ng-show="editView.show" editable-date="project.startDate">
                    {{(project.startDate | date:"MMMM dd, yyyy") || 'No start date.'}}
                </a>
            </div>
            <div class="row">
                <div class="col-md-6 title-label">End Date</div>
                <div class="col-md-6" ng-show="!editView.show">{{(project.endDate | date:"MMMM dd, yyyy") || 'No end date.'}}</div>
                <a href="#" ng-show="editView.show" editable-date="project.endDate">
                    {{(project.endDate | date:"MMMM dd, yyyy") || 'No end date.'}}
                </a>
            </div>
            <div class="row">
                <div class="col-md-6 title-label">Themes</div>
                <div class="col-md-6" ng-show="!editView.show">
                    <ul>
                        <li ng-repeat="theme in project.themes">{{theme.value}}</li>
                    </ul>
                </div>
                <div class="col-md-6" ng-show="editView.show">
                    <isteven-multi-select input-model="editView.themes"
                                          output-model="editView.out.themes"
                                          button-label="name"
                                          item-label="name"
                                          tick-property="ticked"
                                          selection-mode="multiple"
                                          helper-elements="filter none reset"
                                          max-height="250px"
                                          on-search-change="editView.searchThemes(data)"
                                          on-select-none="editView.removeThemes()">
                    </isteven-multi-select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 title-label">Strategic Goals</div>
                <div class="col-md-6" ng-show="!editView.show">
                    <ul>
                        <li ng-repeat="goal in project.goals">{{goal.value}}</li>
                    </ul>
                </div>
                <div class="col-md-6" ng-show="editView.show">
                    <isteven-multi-select input-model="editView.goals"
                                          output-model="editView.out.goals"
                                          button-label="name"
                                          item-label="name"
                                          tick-property="ticked"
                                          selection-mode="multiple"
                                          helper-elements="filter none reset"
                                          max-height="250px"
                                          on-search-change="editView.searchGoals(data)"
                                          on-select-none="editView.removeGoals()">
                    </isteven-multi-select>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-6 title-label">Focus</div>
                <div class="col-md-6" ng-show="!editView.show">{{project.focus}}</div>
                <a href="#" editable-select="project.focusId" ng-show="editView.show" onshow="editView.loadFoci()" onaftersave="view.updateFocusView()" e-ng-options="s.id as s.name for s in editView.foci">
                    {{ project.focus }}
                </a>
            </div>
            <div class="row">
                <div class="col-md-6 title-label">Office</div>
                <div class="col-md-6"><a ui-sref="offices.overview({officeId: program.ownerOrganizationId})">{{program.ownerName}}</a></div>
            </div>
            <div class="row">
                <div class="col-md-6 title-label">Program</div>
                <div class="col-md-6"><a ui-sref="programs.overview({programId: program.id})">{{program.name}}</a></div>
            </div>
            <div class="row" ng-show="project.contacts">
                <div class="col-md-6 title-label"><ng-pluralize count="project.contacts.length" when="{'1':'Point','other':'Points'}"></ng-pluralize> of Contact</div>
                <div class="col-md-6" ng-show="!editView.show">
                    <ul>
                        <li ng-repeat="contact in project.contacts">{{contact.value}}</li>
                    </ul>
                </div>
                <div class="col-md-6" ng-show="editView.show">
                    <isteven-multi-select input-model="editView.pointsOfContact"
                                          output-model="editView.out.pointsOfContact"
                                          button-label="fullName"
                                          item-label="fullName"
                                          tick-property="ticked"
                                          selection-mode="multiple"
                                          helper-elements="filter none reset"
                                          max-height="250px"
                                          on-search-change="editView.searchPointsOfContact(data)"
                                          on-select-none="editView.removePointsOfContact()">
                    </isteven-multi-select>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <h4 class="tab-subheader">Snapshot</h4>
        <div class="col-md-4">
            <p class="stat text-center">{{project.countryIsos.length}}</p>
            <p class="title-label text-center">Locations</p>
        </div>
        <div class="col-md-8">
            <map width="600" height="300" activecolor="5cb9dd" countries="project.countryIsos"></map>
        </div>
    </div>
</div>

<modal-dialog show="view.saveFailed" dialog-title="Error Saving Project" before-close="view.confirmFailOk()">
    <p class="strong">There was an error updating the project.</p>
    <p class="alert-warning">{{view.errorMessage}}</p>
    <div>
        <ul>
            <li class="alert-danger" ng-repeat="validation in view.validations">{{validation}}</li>
        </ul>
    </div>
    <button class="btn btn-default right" ng-click="view.confirmFailOk()">OK</button>
</modal-dialog>

